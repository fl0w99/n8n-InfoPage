<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dein Morgenbericht</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; padding: 16px; background-color: #f8f9fa; color: #212529; line-height: 1.6; }
        .card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        h1 { font-size: 24px; margin-bottom: 8px; color: #1a73e8; }
        .date { color: #6c757d; font-size: 14px; margin-bottom: 24px; }
        .gemini-text { font-size: 16px; white-space: pre-line; }
        #chart { width: 100%; height: 350px; }
        .footer { text-align: center; font-size: 12px; color: #adb5bd; margin-top: 20px; }
    </style>
</head>
<body>

    <h1>Guten Morgen!</h1>
    <div class="date">Donnerstag, 19. Februar 2026</div>

    <div class="card">
        <div class="gemini-text">
            <strong>KI-Zusammenfassung:</strong>
            Keine Zusammenfassung verfügbar.
        </div>
    </div>

    <div class="card">
        <strong>Datenvisualisierung</strong>
        <div id="chart"></div>
    </div>

    <div class="footer">Erstellt mit n8n & Gemini AI</div>

    <script>
        // Diese Daten kommen jetzt von deinem Code-Node, der die SQL-Daten aufbereitet hat
        const data = [{
            x: [undefined], // Beispiel: '2026-02-12', '2026-02-13'...
            y: [undefined], // Beispiel: 1759, 1799...
            type: 'scatter',
            mode: 'lines+markers',
            marker: { color: '#1a73e8' },
            line: { shape: 'hv', width: 2 } // 'hv' zeigt Preissprünge besser an
        }];

        const layout = {
            margin: { t: 20, b: 40, l: 40, r: 10 },
            xaxis: { gridcolor: '#eee', type: 'date' },
            yaxis: { gridcolor: '#eee', title: 'Preis in €' },
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            autosize: true
        };

        const config = { responsive: true, displayModeBar: false };
        Plotly.newPlot('chart', data, layout, config);
    </script>
</body>
</html>
